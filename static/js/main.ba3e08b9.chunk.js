(this["webpackJsonpgoit-react-hw-02-phonebook"]=this["webpackJsonpgoit-react-hw-02-phonebook"]||[]).push([[0],{10:function(e,t,a){e.exports={ImageGallery:"ImageGallery_ImageGallery__4ZX8h",TextEror:"ImageGallery_TextEror__E1yNr"}},11:function(e,t,a){e.exports={Overlay:"Modal_Overlay__2HtOd",Modal:"Modal_Modal__3EjB9"}},14:function(e,t,a){e.exports={Loader:"Loader_Loader__3AWLY"}},15:function(e,t,a){e.exports={Button:"Button_Button__1rFnX"}},21:function(e,t,a){},22:function(e,t,a){e.exports={App:"App_App__5Qt7O","App-logo":"App_App-logo__zGzaU","App-logo-spin":"App_App-logo-spin__cOeLh","App-header":"App_App-header__3EnpM","App-link":"App_App-link__23N5p",container:"App_container__3xjOG",title:"App_title__2S9Ut"}},44:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a(1),o=a.n(n),c=a(12),s=a.n(c),l=(a(21),a(3)),i=a(4),u=a(6),h=a(5),p=(a(22),a(7)),m=a.n(p),d=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(l.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={searchQuery:""},e.handleChange=function(t){e.setState({searchQuery:t.currentTarget.value})},e.reset=function(){e.setState({searchQuery:""})},e.handlAdd=function(t){t.preventDefault(),e.props.onSubmit(e.state),e.reset()},e}return Object(i.a)(a,[{key:"render",value:function(){return Object(r.jsx)("header",{className:m.a.Searchbar,children:Object(r.jsxs)("form",{onSubmit:this.handlAdd,className:m.a.SearchForm,children:[Object(r.jsx)("button",{type:"submit",className:m.a.SearchFormButton,children:Object(r.jsx)("span",{className:m.a.SearchFormButtonLabel,children:"Search"})}),Object(r.jsx)("input",{onChange:this.handleChange,className:m.a.SearchFormInput,value:this.state.searchQuery,type:"text",autocomplete:"off",autofocus:!0,placeholder:"Search images and photos"})]})})}}]),a}(n.Component),b=a(9),g=a.n(b),j=function(e){var t=e.id,a=e.source,n=e.alte,o=e.modalimg,c=e.tags,s=e.onClick;return Object(r.jsx)("li",{className:g.a.ImageGalleryItem,onClick:function(){return s(o,c)},children:Object(r.jsx)("img",{src:a,alt:n,datalargeImageURL:o,className:g.a.ImageGalleryItemImage})},t.toString())},_=a(10),f=a.n(_);var y={fetchImage:function(e,t){return fetch("".concat("https://pixabay.com/api/","?q=").concat(e,"&page=1&key=").concat("19280898-6ce77fd5c708cfadb8184ec4d","&image_type=photo&orientation=horizontal&per_page=").concat(12*t)).then((function(t){return t.ok?t.json():Promise.reject(new Error("\u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u0441 \u0442\u0430\u043a\u0438\u043c \u0438\u043c\u0435\u043d\u0435\u043c ".concat(e)))}))}},O=a(13),v=a.n(O),S=(a(43),a(14)),x=a.n(S),I=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return Object(r.jsx)("div",{className:x.a.Loader,children:Object(r.jsx)(v.a,{type:"Circles",color:"#00BFFF",height:80,width:80,timeout:3e3})})}}]),a}(n.Component),N=a(15),A=a.n(N),k=function(e){var t=e.updateStatePageNumber;return Object(r.jsx)("button",{onClick:t,type:"button",className:A.a.butForm,children:"Load More"})},w=a(11),F=a.n(w),C=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("keyup",this.props.onClose,!1)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keyup",this.props.onClose,!1)}},{key:"render",value:function(){var e=this.props,t=e.source,a=e.alte;return Object(r.jsx)("div",{className:F.a.Overlay,children:Object(r.jsx)("div",{className:F.a.Modal,children:Object(r.jsx)("img",{src:t,alt:a})})})}}]),a}(n.Component),L="idle",M="pending",G="resolved",B="rejected",Q=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(l.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={images:null,error:null,status:L,pageNumber:1,showModal:!1,largeImageURL:null,alte:null},e.updateStatePageNumber=function(){e.setState((function(e){return{pageNumber:e.pageNumber+1}}))},e.toggleModal=function(t,a){e.setState((function(e){var r=e.showModal;return{largeImageURL:t,tags:a,showModal:!r}}))},e.closeModal=function(){e.setState({showModal:!1})},e}return Object(i.a)(a,[{key:"componentDidUpdate",value:function(e,t){var a=this,r=e.searchQuery,n=t.pageNumber,o=this.props.searchQuery,c=this.state.pageNumber;r===o&&n===c||(this.setState({status:M}),setTimeout((function(){y.fetchImage(o,a.state.pageNumber).then((function(e){return a.setState({images:e,status:G})})).then((function(){window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})})).catch((function(e){return a.setState({error:e,status:B})}))}),2e3))}},{key:"render",value:function(){var e=this,t=this.state,a=t.images,n=(t.error,t.status);return"idle"===n?Object(r.jsx)("div",{className:f.a.TextEror,children:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f."}):"pending"===n&&null===a?Object(r.jsx)(I,{}):"rejected"===n?alert("\u041e\u0448\u0438\u0431\u043a\u0430 \u0432 \u043f\u043e\u0438\u0441\u043a\u0435 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f"):"resolved"===n||"pending"===n&&null!==a?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("ul",{className:f.a.ImageGallery,children:a.hits.map((function(t){return Object(r.jsx)(j,{id:t.id,source:t.webformatURL,alte:t.tags,modalimg:t.largeImageURL,tags:t.tags,onClick:e.toggleModal},t.id)}))}),Object(r.jsx)(k,{updateStatePageNumber:this.updateStatePageNumber}),"pending"===n&&Object(r.jsx)(I,{}),this.state.showModal&&Object(r.jsx)(C,{source:this.state.largeImageURL,alte:this.state.tags,onClose:this.closeModal})]}):void 0}}]),a}(n.Component),E=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(l.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={searchQuery:""},e.onSubmit=function(t){e.setState({searchQuery:t.searchQuery})},e}return Object(i.a)(a,[{key:"render",value:function(){return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(d,{onSubmit:this.onSubmit}),Object(r.jsx)(Q,{searchQuery:this.state.searchQuery})]})}}]),a}(n.Component);s.a.render(Object(r.jsx)(o.a.StrictMode,{children:Object(r.jsx)(E,{})}),document.getElementById("root"))},7:function(e,t,a){e.exports={Searchbar:"Searchbar_Searchbar__2CCPi",SearchForm:"Searchbar_SearchForm__F8rwc",SearchFormButton:"Searchbar_SearchFormButton__6dlD_",SearchFormButtonLabel:"Searchbar_SearchFormButtonLabel__1Qxc6",SearchFormInput:"Searchbar_SearchFormInput__3hz52"}},9:function(e,t,a){e.exports={ImageGalleryItem:"ImageGalleryItem_ImageGalleryItem__2lBd4",ImageGalleryItemImage:"ImageGalleryItem_ImageGalleryItemImage__2E_Gy"}}},[[44,1,2]]]);
//# sourceMappingURL=main.ba3e08b9.chunk.js.map